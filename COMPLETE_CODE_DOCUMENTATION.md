# ì˜¤ëŠ˜ë¡œë˜ í”„ë¡œì íŠ¸ ì „ì²´ ì½”ë“œ ìƒì„¸ ì„¤ëª…ì„œ

## ğŸ“‹ ëª©ì°¨

1. [í”„ë¡œì íŠ¸ ê°œìš”](#1-í”„ë¡œì íŠ¸-ê°œìš”)
2. [ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜](#2-ì‹œìŠ¤í…œ-ì•„í‚¤í…ì²˜)
3. [í•µì‹¬ íŒŒì¼ ìƒì„¸ ë¶„ì„](#3-í•µì‹¬-íŒŒì¼-ìƒì„¸-ë¶„ì„)
4. [ë°ì´í„° í”Œë¡œìš°](#4-ë°ì´í„°-í”Œë¡œìš°)
5. [ì£¼ìš” í•¨ìˆ˜ ë° í´ë˜ìŠ¤](#5-ì£¼ìš”-í•¨ìˆ˜-ë°-í´ë˜ìŠ¤)
6. [API ì—”ë“œí¬ì¸íŠ¸ ìƒì„¸](#6-api-ì—”ë“œí¬ì¸íŠ¸-ìƒì„¸)
7. [í”„ë¡ íŠ¸ì—”ë“œ êµ¬ì¡°](#7-í”„ë¡ íŠ¸ì—”ë“œ-êµ¬ì¡°)
8. [ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ](#8-ë°ì´í„°ë² ì´ìŠ¤-ìŠ¤í‚¤ë§ˆ)
9. [ë³´ì•ˆ ë° ìµœì í™”](#9-ë³´ì•ˆ-ë°-ìµœì í™”)

---

## 1. í”„ë¡œì íŠ¸ ê°œìš”

### 1.1 í”„ë¡œì íŠ¸ ì •ë³´

- **í”„ë¡œì íŠ¸ëª…**: ì˜¤ëŠ˜ë¡œë˜ (LottoInsight.ai)
- **ê¸°ë°˜ í”„ë ˆì„ì›Œí¬**: GNUBOARD 5.6.13
- **ì£¼ìš” ì–¸ì–´**: PHP 7.4+, JavaScript (ES6+)
- **ë°ì´í„°ë² ì´ìŠ¤**: MySQL/MariaDB
- **ì„œë¹„ìŠ¤ ìœ í˜•**: AI ê¸°ë°˜ ë¡œë˜ ë²ˆí˜¸ ë¶„ì„ ì„œë¹„ìŠ¤

### 1.2 í•µì‹¬ ê¸°ëŠ¥

1. **ë¡œë˜ ë°ì´í„° ìˆ˜ì§‘**: ë™í–‰ë³µê¶Œ ê³µì‹ API ì—°ë™ (1~1,201íšŒì°¨)
2. **AI ë²ˆí˜¸ ë¶„ì„**: 10ê°€ì§€ ì´ìƒì˜ í†µê³„ ì•Œê³ ë¦¬ì¦˜
3. **í¬ë ˆë”§ ì‹œìŠ¤í…œ**: ë¬´ë£Œ/ìœ ë£Œ í¬ë ˆë”§ ê´€ë¦¬
4. **ê²°ì œ ì—°ë™**: í† ìŠ¤í˜ì´ë¨¼ì¸  ê²°ì œ ì‹œìŠ¤í…œ
5. **íšŒì› ê´€ë¦¬**: ì¹´ì¹´ì˜¤ ê°„í¸ ë¡œê·¸ì¸

---

## 2. ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

### 2.1 ì „ì²´ êµ¬ì¡°ë„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ì‚¬ìš©ì (ë¸Œë¼ìš°ì €)                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              í”„ë¡ íŠ¸ì—”ë“œ (HTML/CSS/JavaScript)            â”‚
â”‚  - index.php (ëœë”© í˜ì´ì§€)                               â”‚
â”‚  - auth.php (ë¡œê·¸ì¸ í˜ì´ì§€)                              â”‚
â”‚  - result.php (ë¶„ì„ ê²°ê³¼ í˜ì´ì§€)                         â”‚
â”‚  - scripts/lotto-generator.js (AI ì—”ì§„)                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              API ë ˆì´ì–´ (RESTful API)                     â”‚
â”‚  - api/get_credits.php                                  â”‚
â”‚  - api/use_credit.php                                   â”‚
â”‚  - api/save_analysis.php                                â”‚
â”‚  - api/toss/create_order.php                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ë ˆì´ì–´ (PHP Library)             â”‚
â”‚  - lib/lotto_credit.lib.php (í¬ë ˆë”§ ê´€ë¦¬)                â”‚
â”‚  - lib/lotto_draw.lib.php (íšŒì°¨ ë°ì´í„° ì²˜ë¦¬)             â”‚
â”‚  - lib/lotto_store.lib.php (íŒë§¤ì  ì •ë³´)                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              ë°ì´í„° ë ˆì´ì–´ (MySQL)                        â”‚
â”‚  - g5_lotto_draw (íšŒì°¨ ë°ì´í„°)                           â”‚
â”‚  - g5_lotto_credit (í¬ë ˆë”§)                              â”‚
â”‚  - g5_lotto_analysis (ë¶„ì„ ê²°ê³¼)                         â”‚
â”‚  - g5_member (íšŒì› ì •ë³´)                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            ì™¸ë¶€ ì„œë¹„ìŠ¤ ì—°ë™                                â”‚
â”‚  - ë™í–‰ë³µê¶Œ API (ë°ì´í„° ìˆ˜ì§‘)                             â”‚
â”‚  - í† ìŠ¤í˜ì´ë¨¼ì¸  API (ê²°ì œ)                                â”‚
â”‚  - ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸ API (ì¸ì¦)                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 ë””ë ‰í† ë¦¬ êµ¬ì¡° ìƒì„¸

```
/
â”œâ”€â”€ index.php                    # ë©”ì¸ ëœë”© í˜ì´ì§€ (8,077ì¤„)
â”œâ”€â”€ auth.php                     # ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸ í˜ì´ì§€ (1,132ì¤„)
â”œâ”€â”€ result.php                   # ë¶„ì„ ê²°ê³¼ í˜ì´ì§€ (4,394ì¤„)
â”œâ”€â”€ common.php                   # GNUBOARD ê³µí†µ íŒŒì¼
â”‚
â”œâ”€â”€ api/                         # RESTful API ì—”ë“œí¬ì¸íŠ¸
â”‚   â”œâ”€â”€ get_credits.php         # í¬ë ˆë”§ ì¡°íšŒ
â”‚   â”œâ”€â”€ use_credit.php          # í¬ë ˆë”§ ì‚¬ìš©
â”‚   â”œâ”€â”€ save_analysis.php       # ë¶„ì„ ê²°ê³¼ ì €ì¥
â”‚   â”œâ”€â”€ get_history.php         # ë¶„ì„ íˆìŠ¤í† ë¦¬ ì¡°íšŒ
â”‚   â”œâ”€â”€ credit/
â”‚   â”‚   â””â”€â”€ balance.php         # í¬ë ˆë”§ ì”ì•¡ ì¡°íšŒ (í•˜ìœ„ í˜¸í™˜)
â”‚   â””â”€â”€ toss/                   # í† ìŠ¤ ê²°ì œ API
â”‚       â”œâ”€â”€ create_order.php   # ì£¼ë¬¸ ìƒì„±
â”‚       â”œâ”€â”€ success.php        # ê²°ì œ ì„±ê³µ
â”‚       â””â”€â”€ fail.php           # ê²°ì œ ì‹¤íŒ¨
â”‚
â”œâ”€â”€ lib/                         # í•µì‹¬ ë¼ì´ë¸ŒëŸ¬ë¦¬
â”‚   â”œâ”€â”€ lotto_credit.lib.php    # í¬ë ˆë”§ ê´€ë¦¬ (305ì¤„)
â”‚   â”œâ”€â”€ lotto_draw.lib.php      # íšŒì°¨ ë°ì´í„° ì²˜ë¦¬ (386ì¤„)
â”‚   â””â”€â”€ lotto_store.lib.php     # íŒë§¤ì  ì •ë³´ (779ì¤„)
â”‚
â”œâ”€â”€ cron/                        # ìŠ¤ì¼€ì¤„ ì‘ì—…
â”‚   â”œâ”€â”€ lotto_weekly.php        # ì£¼ê°„ íšŒì°¨ ì—…ë°ì´íŠ¸ (74ì¤„)
â”‚   â”œâ”€â”€ lotto_store_sync.php    # íŒë§¤ì  ë°ì´í„° ë™ê¸°í™”
â”‚   â””â”€â”€ lotto_seed.php          # ì´ˆê¸° ë°ì´í„° ì‹œë”©
â”‚
â”œâ”€â”€ scripts/                      # í”„ë¡ íŠ¸ì—”ë“œ JavaScript
â”‚   â”œâ”€â”€ lotto-generator.js      # AI ë¶„ì„ ì—”ì§„ (980ì¤„)
â”‚   â”œâ”€â”€ lotto-data.js           # ë¡œë˜ íˆìŠ¤í† ë¦¬ ë°ì´í„° (1,207ì¤„)
â”‚   â””â”€â”€ gnuboard-api.js         # GNUBOARD API ë˜í¼ (195ì¤„)
â”‚
â”œâ”€â”€ payments/                     # ê²°ì œ ì²˜ë¦¬
â”‚   â””â”€â”€ toss/
â”‚       â”œâ”€â”€ success.php         # ê²°ì œ ì„±ê³µ ì²˜ë¦¬
â”‚       â””â”€â”€ fail.php            # ê²°ì œ ì‹¤íŒ¨ ì²˜ë¦¬
â”‚
â”œâ”€â”€ bbs/                         # GNUBOARD ê²Œì‹œíŒ
â”œâ”€â”€ adm/                         # ê´€ë¦¬ì í˜ì´ì§€
â”œâ”€â”€ mobile/                      # ëª¨ë°”ì¼ í˜ì´ì§€
â””â”€â”€ theme/                       # í…Œë§ˆ íŒŒì¼
```

---

## 3. í•µì‹¬ íŒŒì¼ ìƒì„¸ ë¶„ì„

### 3.1 `index.php` - ë©”ì¸ ëœë”© í˜ì´ì§€

#### íŒŒì¼ êµ¬ì¡°

```php
<?php
// 1. GNUBOARD í™˜ê²½ ë¡œë“œ
if (!defined('_GNUBOARD_')) {
    include_once($_SERVER['DOCUMENT_ROOT'] . '/common.php');
}

// 2. ìµœì‹  íšŒì°¨ ì •ë³´ ì¡°íšŒ
$row = sql_fetch("SELECT MAX(draw_no) AS max_round FROM g5_lotto_draw");
$max_round = (int)($row['max_round'] ?? 0);
$total_numbers = $max_round * 6;

// 3. HTML ì¶œë ¥ (SEO ìµœì í™” í¬í•¨)
?>
<!DOCTYPE html>
<html lang="ko">
<head>
    <!-- SEO ë©”íƒ€ íƒœê·¸ -->
    <!-- Open Graph -->
    <!-- Structured Data (JSON-LD) -->
</head>
<body>
    <!-- ëœë”© í˜ì´ì§€ ì½˜í…ì¸  -->
</body>
</html>
```

#### ì£¼ìš” ê¸°ëŠ¥

1. **SEO ìµœì í™”**
   - ë©”íƒ€ íƒœê·¸ (title, description, keywords)
   - Open Graph íƒœê·¸
   - Twitter Card íƒœê·¸
   - FAQPage êµ¬ì¡°í™”ëœ ë°ì´í„° (JSON-LD)
   - WebApplication ìŠ¤í‚¤ë§ˆ

2. **ë™ì  ì½˜í…ì¸ **
   - ìµœì‹  íšŒì°¨ ì •ë³´ í‘œì‹œ
   - ì´ ë¶„ì„ ë°ì´í„° ìˆ˜ ê³„ì‚°
   - ì‹¤ì‹œê°„ ëŒ€ê¸°ì—´ ë²ˆí˜¸

3. **ì‚¬ìš©ì ìœ ë„**
   - ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸ ë²„íŠ¼
   - ë¬´ë£Œ ë¶„ì„ í˜œíƒ ê°•ì¡°
   - CTA (Call To Action) ë²„íŠ¼

#### ì½”ë“œ ì˜ˆì‹œ

```php
// ìµœì‹  íšŒì°¨ ì¡°íšŒ
$row = sql_fetch("SELECT MAX(draw_no) AS max_round FROM g5_lotto_draw");
$max_round = (int)($row['max_round'] ?? 0);
$total_numbers = $max_round * 6; // ì´ ë¶„ì„ ë°ì´í„° ìˆ˜

// SEO ë©”íƒ€ íƒœê·¸ì— ë™ì  ì‚½ì…
<title>ì˜¤ëŠ˜ë¡œë˜ - AI ê¸°ë°˜ ë¡œë˜ ë²ˆí˜¸ ë¶„ì„ | <?= (int)$max_round ?>íšŒì°¨ ë°ì´í„° ì‹¤ì‹œê°„ ë°˜ì˜</title>
```

---

### 3.2 `auth.php` - ë¡œê·¸ì¸ í˜ì´ì§€

#### íŒŒì¼ êµ¬ì¡°

```php
<?php
// 1. GNUBOARD í™˜ê²½ ë¡œë“œ
// 2. ì¹´ì¹´ì˜¤ SDK ì´ˆê¸°í™”
// 3. ë¡œê·¸ì¸ ìƒíƒœ í™•ì¸
// 4. HTML ì¶œë ¥
?>
```

#### ì£¼ìš” ê¸°ëŠ¥

1. **ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸ ì—°ë™**
   - ì¹´ì¹´ì˜¤ SDK ì´ˆê¸°í™”
   - ë¡œê·¸ì¸ ë²„íŠ¼ ë Œë”ë§
   - ì½œë°± ì²˜ë¦¬

2. **ì‚¬ìš©ì ê²½í—˜ ìµœì í™”**
   - ì• ë‹ˆë©”ì´ì…˜ ë°°ê²½
   - ë°˜ì‘í˜• ë””ìì¸
   - ë¡œë”© ìƒíƒœ í‘œì‹œ

#### ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸ í”Œë¡œìš°

```javascript
// 1. ì¹´ì¹´ì˜¤ SDK ì´ˆê¸°í™”
Kakao.init('YOUR_KAKAO_REST_API_KEY');

// 2. ë¡œê·¸ì¸ ìš”ì²­
Kakao.Auth.login({
    success: function(authObj) {
        // 3. ì‚¬ìš©ì ì •ë³´ ìš”ì²­
        Kakao.API.request({
            url: '/v2/user/me',
            success: function(res) {
                // 4. ì„œë²„ë¡œ ì „ì†¡
                window.location.href = '/kakao_login.php?code=...';
            }
        });
    }
});
```

---

### 3.3 `result.php` - ë¶„ì„ ê²°ê³¼ í˜ì´ì§€

#### íŒŒì¼ êµ¬ì¡° (4,394ì¤„)

```php
<?php
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// 1. GNUBOARD ê³µí†µ íŒŒì¼ ë¡œë“œ
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
include_once('./common.php');
include_once(G5_LIB_PATH . '/lotto_draw.lib.php');
include_once(G5_LIB_PATH . '/lotto_credit.lib.php');

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// 2. ë¡œê·¸ì¸ ì²´í¬
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
if (empty($is_member)) {
    alert('ë¡œê·¸ì¸ í›„ ì´ìš© ê°€ëŠ¥í•œ ì„œë¹„ìŠ¤ì…ë‹ˆë‹¤.', ...);
}

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// 3. í˜„ì¬ íšŒì°¨ ë° ìµœê·¼ íšŒì°¨ ë°ì´í„° ë¡œë”©
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
$current_round = $latest_draw_no + 1; // ë¶„ì„ ëŒ€ìƒ íšŒì°¨
$latest_round = $latest_draw_no;      // ìµœì‹  ì¶”ì²¨ íšŒì°¨

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// 4. íšŒì› í¬ë ˆë”§ ì •ë³´
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
$credit_row = lotto_get_credit_row($member['mb_id'], true);
$server_free_credits = (int)($credit_row['free_uses'] ?? 0);
$server_paid_credits = (int)($credit_row['credit_balance'] ?? 0);

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// 5. AJAX í¬ë ˆë”§ ì‚¬ìš© ìš”ì²­ ì²˜ë¦¬
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
if ($_POST['mode'] === 'use_credit') {
    // í¬ë ˆë”§ ì‚¬ìš© ì²˜ë¦¬
    // JSON ì‘ë‹µ ë°˜í™˜
}

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// 6. HTML ì¶œë ¥
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
?>
<!DOCTYPE html>
<html>
<head>
    <!-- ë©”íƒ€ íƒœê·¸ -->
    <!-- ìŠ¤íƒ€ì¼ì‹œíŠ¸ -->
    <!-- JavaScript -->
</head>
<body>
    <!-- í˜ì´ì§€ ì½˜í…ì¸  -->
    <script>
        // í´ë¼ì´ì–¸íŠ¸ ì‚¬ì´ë“œ ë¡œì§
    </script>
</body>
</html>
```

#### ì£¼ìš” ì„¹ì…˜

1. **ì„œë²„ ì‚¬ì´ë“œ ì²˜ë¦¬ (PHP)**
   - ë¡œê·¸ì¸ ì²´í¬
   - í¬ë ˆë”§ ì¡°íšŒ
   - íšŒì°¨ ë°ì´í„° ë¡œë“œ
   - AJAX ìš”ì²­ ì²˜ë¦¬

2. **í´ë¼ì´ì–¸íŠ¸ ì‚¬ì´ë“œ ë¡œì§ (JavaScript)**
   - ë²ˆí˜¸ ìƒì„± ì—”ì§„ ì´ˆê¸°í™”
   - ë¶„ì„ ì‹¤í–‰
   - ê²°ê³¼ í‘œì‹œ
   - í¬ë ˆë”§ ê´€ë¦¬

#### í•µì‹¬ í•¨ìˆ˜

##### `startAnalysis()` - ë¶„ì„ ì‹œì‘

```javascript
async function startAnalysis() {
    // 1. í¬ë ˆë”§ ì‚¬ìš© ìš”ì²­
    const resp = await fetch(location.pathname, {
        method: 'POST',
        body: new URLSearchParams({ mode: 'use_credit' })
    });
    
    const data = await resp.json();
    if (!data.success) {
        // í¬ë ˆë”§ ë¶€ì¡± ë“± ì—ëŸ¬ ì²˜ë¦¬
        return;
    }
    
    // 2. ë²ˆí˜¸ ìƒì„± ì—”ì§„ ì¤€ë¹„
    await ensureGeneratorReady();
    
    // 3. ë¡œë”© í™”ë©´ í‘œì‹œ
    showLoading();
    
    // 4. ë²ˆí˜¸ ìƒì„± ë° ê²°ê³¼ í‘œì‹œ
    generateAndDisplay();
}
```

##### `generateAndDisplay()` - ë²ˆí˜¸ ìƒì„± ë° í‘œì‹œ

```javascript
async function generateAndDisplay() {
    const generator = await ensureGeneratorReady();
    
    // ì„ íƒëœ ìŠ¤íƒ€ì¼ë¡œ ë²ˆí˜¸ ìƒì„±
    const selectedStyles = state.selectedStyles;
    const results = [];
    
    for (const style of selectedStyles) {
        const result = generator.generate(style);
        results.push(result);
    }
    
    // ê²°ê³¼ ë Œë”ë§
    renderResults(results);
    
    // ì €ì¥ ê¸°ëŠ¥ í™œì„±í™”
    enableSaveFunction();
}
```

---

### 3.4 `lib/lotto_draw.lib.php` - íšŒì°¨ ë°ì´í„° ì²˜ë¦¬

#### ì£¼ìš” í•¨ìˆ˜

##### `li_get_lotto_api_json()` - ë™í–‰ë³µê¶Œ API í˜¸ì¶œ

```php
function li_get_lotto_api_json($drwNo, &$error = '')
{
    $url = 'https://www.dhlottery.co.kr/common.do?method=getLottoNumber&drwNo=' . $drwNo;
    
    // cURL ë˜ëŠ” file_get_contents ì‚¬ìš©
    $raw = curl_exec($ch);
    
    // JSON íŒŒì‹±
    $data = json_decode($raw, true);
    
    // ì‘ë‹µ ê²€ì¦
    if ($data['returnValue'] !== 'success') {
        $error = 'API returnValue = ' . ($data['returnValue'] ?? 'ì—†ìŒ');
        return null;
    }
    
    return $data;
}
```

**ì‘ë‹µ í˜•ì‹:**
```json
{
    "returnValue": "success",
    "drwNo": 1201,
    "drwNoDate": "2025-12-06",
    "drwtNo1": 7,
    "drwtNo2": 9,
    "drwtNo3": 24,
    "drwtNo4": 27,
    "drwtNo5": 35,
    "drwtNo6": 36,
    "bnusNo": 37,
    "firstAccumamnt": 1000000000,
    "firstWinamnt": 1000000000,
    "firstPrzwnerCo": 5,
    "totSellamnt": 10000000000
}
```

##### `li_get_lotto_bywin_html()` - 2/3ë“± ì •ë³´ ìˆ˜ì§‘

```php
function li_get_lotto_bywin_html($drwNo, &$error = '')
{
    $url = 'https://www.dhlottery.co.kr/gameResult.do?method=byWin&drwNo=' . $drwNo;
    
    // HTML ê°€ì ¸ì˜¤ê¸°
    $raw = curl_exec($ch);
    
    return $raw;
}
```

##### `li_parse_prize_23_from_bywin()` - HTML íŒŒì‹±

```php
function li_parse_prize_23_from_bywin($html, &$error = '')
{
    // 1. DOM íŒŒì‹± ì‹œë„
    $dom = new DOMDocument();
    $dom->loadHTML($html);
    $xpath = new DOMXPath($dom);
    
    // 2ë“±/3ë“± ì •ë³´ ì¶”ì¶œ
    foreach ($trs as $tr) {
        if (mb_strpos($rank, '2ë“±') !== false) {
            $out['second_winners'] = li_to_int($cells[2]);
            $out['second_prize_each'] = li_to_int($cells[3]);
        }
        if (mb_strpos($rank, '3ë“±') !== false) {
            $out['third_winners'] = li_to_int($cells[2]);
            $out['third_prize_each'] = li_to_int($cells[3]);
        }
    }
    
    // 3. Fallback: ì •ê·œì‹ íŒŒì‹±
    if ($out['second_winners'] <= 0) {
        preg_match('/2ë“±[^0-9]*([0-9,]+)[^0-9]*([0-9,]+)ì›/u', $text, $m);
        // ...
    }
    
    return $out;
}
```

##### `li_save_lotto_draw()` - DB ì €ì¥

```php
function li_save_lotto_draw(array $data, &$error = '')
{
    // ë°ì´í„° ë§¤í•‘
    $draw_no = (int)($data['drwNo'] ?? 0);
    $draw_date = trim($data['drwNoDate'] ?? '');
    $n1 = (int)($data['drwtNo1'] ?? 0);
    // ... n2~n6, bonus
    
    // INSERT ... ON DUPLICATE KEY UPDATE
    $sql = "
        INSERT INTO g5_lotto_draw
        (draw_no, draw_date, n1, n2, n3, n4, n5, n6, bonus, ...)
        VALUES (...)
        ON DUPLICATE KEY UPDATE
            draw_date = VALUES(draw_date),
            n1 = VALUES(n1),
            ...
    ";
    
    sql_query($sql);
    return true;
}
```

##### `li_fetch_and_save_lotto_draw()` - í†µí•© í•¨ìˆ˜

```php
function li_fetch_and_save_lotto_draw($drwNo, &$error = '')
{
    // 1. JSON API í˜¸ì¶œ (ë²ˆí˜¸/1ë“± ì •ë³´)
    $data = li_get_lotto_api_json($drwNo, $error);
    if (!$data) return false;
    
    // 2. HTML íŒŒì‹± (2/3ë“± ì •ë³´)
    $html = li_get_lotto_bywin_html($drwNo, $err2);
    if ($html) {
        $p = li_parse_prize_23_from_bywin($html, $err3);
        if ($p) {
            $data['second_winners'] = $p['second_winners'];
            $data['second_prize_each'] = $p['second_prize_each'];
            $data['third_winners'] = $p['third_winners'];
            $data['third_prize_each'] = $p['third_prize_each'];
        }
    }
    
    // 3. DB ì €ì¥
    return li_save_lotto_draw($data, $error);
}
```

---

### 3.5 `lib/lotto_credit.lib.php` - í¬ë ˆë”§ ê´€ë¦¬

#### ì£¼ìš” í•¨ìˆ˜

##### `lotto_get_credit_row()` - í¬ë ˆë”§ ì¡°íšŒ

```php
function lotto_get_credit_row($mb_id, $create_if_not_exists = false)
{
    // 1. ê¸°ì¡´ í¬ë ˆë”§ ì¡°íšŒ
    $row = sql_fetch("SELECT * FROM g5_lotto_credit WHERE mb_id = '{$mb_id}'");
    
    if ($row) {
        return $row; // ê¸°ì¡´ ë°ì´í„° ë°˜í™˜
    }
    
    // 2. ì—†ìœ¼ë©´ ìƒì„± (ë¬´ë£Œ í¬ë ˆë”§ 0íšŒ - íšŒì›ê°€ì… ì‹œì—ë§Œ ì§€ê¸‰)
    if ($create_if_not_exists) {
        sql_query("INSERT INTO g5_lotto_credit 
                   SET mb_id = '{$mb_id}', 
                       free_uses = 0, 
                       credit_balance = 0, ...");
    }
    
    return ['mb_id' => $mb_id, 'free_uses' => 0, 'credit_balance' => 0];
}
```

##### `lotto_use_one_analysis()` - í¬ë ˆë”§ ì‚¬ìš©

```php
function lotto_use_one_analysis($mb_id, $memo = '', $ref_key = '')
{
    // 1. í¬ë ˆë”§ ì¡°íšŒ
    $row = lotto_get_credit_row($mb_id, true);
    $free = (int)$row['free_uses'];
    $paid = (int)$row['credit_balance'];
    
    // 2. í¬ë ˆë”§ ë¶€ì¡± ì²´í¬
    if ($free <= 0 && $paid <= 0) {
        return ['success' => false, 'reason' => 'NO_CREDIT'];
    }
    
    // 3. ì‚¬ìš© ìš°ì„ ìˆœìœ„: ë¬´ë£Œ â†’ ìœ ë£Œ
    $used_as = 'free';
    if ($free > 0) {
        $free--;
    } else {
        $used_as = 'paid';
        $paid--;
    }
    
    // 4. íŠ¸ëœì­ì…˜ ì²˜ë¦¬
    sql_query("BEGIN");
    
    // í¬ë ˆë”§ ì—…ë°ì´íŠ¸
    sql_query("UPDATE g5_lotto_credit 
               SET free_uses = {$free}, 
                   credit_balance = {$paid}, ...");
    
    // ë¡œê·¸ ê¸°ë¡
    sql_query("INSERT INTO g5_lotto_credit_log 
               SET change_type = '{$used_as}', 
                   amount = -1, ...");
    
    sql_query("COMMIT");
    
    return ['success' => true, 'used_as' => $used_as, ...];
}
```

##### `lotto_charge_credit()` - í¬ë ˆë”§ ì¶©ì „

```php
function lotto_charge_credit($mb_id, $amount, $memo = '', $ref_key = '', $change_type = 'charge')
{
    // 1. í˜„ì¬ í¬ë ˆë”§ ì¡°íšŒ
    $row = lotto_get_credit_row($mb_id, true);
    $before_paid = (int)$row['credit_balance'];
    $after_paid = $before_paid + $amount;
    
    // 2. íŠ¸ëœì­ì…˜ ì²˜ë¦¬
    sql_query("BEGIN");
    
    // í¬ë ˆë”§ ì—…ë°ì´íŠ¸
    sql_query("UPDATE g5_lotto_credit 
               SET credit_balance = {$after_paid}, ...");
    
    // ë¡œê·¸ ê¸°ë¡
    sql_query("INSERT INTO g5_lotto_credit_log 
               SET change_type = 'charge', 
                   amount = {$amount}, ...");
    
    sql_query("COMMIT");
    
    return ['success' => true, 'credit_balance' => $after_paid, ...];
}
```

##### `lotto_grant_welcome_credit()` - ì‹ ê·œ íšŒì› ë¬´ë£Œ í¬ë ˆë”§ ì§€ê¸‰

```php
function lotto_grant_welcome_credit($mb_id, $memo = 'ì‹ ê·œ íšŒì› ê°€ì… ì¶•í•˜')
{
    // 1. ì¤‘ë³µ ì§€ê¸‰ ë°©ì§€: welcome ë¡œê·¸ í™•ì¸
    $welcome_log = sql_fetch("SELECT id FROM g5_lotto_credit_log 
                               WHERE mb_id = '{$mb_id}' 
                               AND change_type = 'welcome'");
    if ($welcome_log) {
        return ['success' => false, 'reason' => 'ALREADY_GRANTED'];
    }
    
    // 2. í¬ë ˆë”§ í–‰ í™•ì¸/ìƒì„±
    $existing = sql_fetch("SELECT * FROM g5_lotto_credit WHERE mb_id = '{$mb_id}'");
    
    if ($existing) {
        // ê¸°ì¡´ í–‰ì— ë¬´ë£Œ í¬ë ˆë”§ 1íšŒ ì¶”ê°€
        sql_query("UPDATE g5_lotto_credit SET free_uses = free_uses + 1");
    } else {
        // ìƒˆ í–‰ ìƒì„± (ë¬´ë£Œ 1íšŒ)
        sql_query("INSERT INTO g5_lotto_credit 
                   SET mb_id = '{$mb_id}', free_uses = 1, credit_balance = 0");
    }
    
    // 3. ë¡œê·¸ ê¸°ë¡ (change_type = 'welcome')
    sql_query("INSERT INTO g5_lotto_credit_log 
               SET change_type = 'welcome', amount = 1, ...");
    
    return ['success' => true, 'free_uses' => 1];
}
```

---

### 3.6 `scripts/lotto-generator.js` - AI ë¶„ì„ ì—”ì§„

#### í´ë˜ìŠ¤ êµ¬ì¡°

```javascript
// 1. LottoDataLoader - ë°ì´í„° ë¡œë”
const LottoDataLoader = {
    _cache: null,
    
    get data() {
        // LOTTO_HISTORY_DATA ì²˜ë¦¬ ë° í†µê³„ ê³„ì‚°
    },
    
    _calculateAllTimeStats(rounds) {
        // ì „ì²´ í†µê³„ ê³„ì‚°
        // - ë¹ˆë„ ë¶„ì„
        // - í™€ì§ ë¹„ìœ¨
        // - ê³ ì € ë¹„ìœ¨
        // - ì—°ì†ë²ˆí˜¸ íŒ¨í„´
        // - Hot/Cold ë²ˆí˜¸
    }
};

// 2. lottoGenerator - ë²ˆí˜¸ ìƒì„± ì—”ì§„
const lottoGenerator = {
    ready: false,
    dataLoader: LottoDataLoader,
    
    async init() {
        // ì—”ì§„ ì´ˆê¸°í™”
    },
    
    analyzeStats() {
        // í†µê³„ ë¶„ì„
    },
    
    calculateScore(numbers) {
        // ì ìˆ˜ ê³„ì‚° (50~100ì )
    },
    
    generate(style = 'balanced') {
        // ë²ˆí˜¸ ìƒì„± (10ê°€ì§€ ìŠ¤íƒ€ì¼)
    },
    
    generateReport(result) {
        // ë¦¬í¬íŠ¸ ìƒì„±
    }
};
```

#### ë²ˆí˜¸ ìƒì„± ì•Œê³ ë¦¬ì¦˜

##### 1. Balanced (ê· í˜•) - ê¸°ë³¸ ì „ëµ

```javascript
_generateBalanced(stats) {
    const numbers = [];
    
    // Hot ë²ˆí˜¸ 2ê°œ
    const hotPool = [...stats.hotNumbers];
    while (numbers.length < 2 && hotPool.length > 0) {
        numbers.push(hotPool.splice(randomIndex, 1)[0]);
    }
    
    // Cold/Overdue ë²ˆí˜¸ 2ê°œ
    const coldPool = stats.overdueNumbers.filter(n => !numbers.includes(n));
    while (numbers.length < 4 && coldPool.length > 0) {
        numbers.push(coldPool.splice(randomIndex, 1)[0]);
    }
    
    // ë‚˜ë¨¸ì§€ 2ê°œëŠ” ëœë¤
    while (numbers.length < 6) {
        const n = Math.floor(Math.random() * 45) + 1;
        if (!numbers.includes(n)) numbers.push(n);
    }
    
    // ê· í˜• ì²´í¬ (í™€ì§, ê³ ì €, í•©ê³„, ìƒ‰ìƒ)
    // ê¸°ì¤€ ì¶©ì¡± ì‹œ ë°˜í™˜
    return numbers.sort((a, b) => a - b);
}
```

##### 2. Monte Carlo ì‹œë®¬ë ˆì´ì…˜

```javascript
_generateMonteCarlo(stats) {
    const simulations = 1000;
    const candidateSets = [];
    
    // 1000ë²ˆ ì‹œë®¬ë ˆì´ì…˜
    for (let i = 0; i < simulations; i++) {
        const numbers = [];
        
        // ë¹ˆë„ ê°€ì¤‘ì¹˜ ê¸°ë°˜ ì„ íƒ
        while (numbers.length < 6) {
            const weights = [];
            for (let n = 1; n <= 45; n++) {
                if (!numbers.includes(n)) {
                    const freq = stats.freq[n] || 1;
                    weights.push({ num: n, weight: freq });
                }
            }
            
            // ê°€ì¤‘ì¹˜ ê¸°ë°˜ ëœë¤ ì„ íƒ
            const selected = weightedRandomSelect(weights);
            numbers.push(selected);
        }
        
        const score = this.calculateScore(numbers);
        candidateSets.push({ numbers, score });
    }
    
    // ì ìˆ˜ ìƒìœ„ 10%ì—ì„œ ëœë¤ ì„ íƒ
    candidateSets.sort((a, b) => b.score - a.score);
    const topTen = candidateSets.slice(0, Math.ceil(simulations * 0.1));
    return topTen[randomIndex].numbers;
}
```

##### 3. ì ìˆ˜ ê³„ì‚° ì•Œê³ ë¦¬ì¦˜

```javascript
calculateScore(numbers) {
    let score = 100;
    const sorted = [...numbers].sort((a, b) => a - b);
    
    // 1. í™€ì§ ê· í˜• (3:3 ìµœì )
    const odd = numbers.filter(n => n % 2 === 1).length;
    if (odd === 3) score += 0;
    else if (odd === 2 || odd === 4) score -= 3;
    else if (odd === 1 || odd === 5) score -= 8;
    else score -= 15;
    
    // 2. ê³ ì € ê· í˜• (23 ê¸°ì¤€, 3:3 ìµœì )
    const high = numbers.filter(n => n > 22).length;
    if (high === 3) score += 0;
    else if (high === 2 || high === 4) score -= 3;
    else if (high === 1 || high === 5) score -= 8;
    else score -= 15;
    
    // 3. í•©ê³„ ë²”ìœ„ (100~170 ì´ìƒì )
    const sum = numbers.reduce((a, b) => a + b, 0);
    if (sum >= 100 && sum <= 170) score += 5;
    else if (sum >= 80 && sum <= 190) score -= 5;
    else score -= 15;
    
    // 4. ì—°ì†ë²ˆí˜¸ ì²´í¬ (1ìŒ OK, 2ìŒ ì´ìƒ ê°ì )
    let consecutive = 0;
    for (let i = 0; i < sorted.length - 1; i++) {
        if (sorted[i + 1] - sorted[i] === 1) consecutive++;
    }
    if (consecutive === 0) score += 0;
    else if (consecutive === 1) score += 2;
    else if (consecutive === 2) score -= 5;
    else score -= 15;
    
    // 5. ACê°’ (ë‹¤ì–‘ì„± ì§€ìˆ˜, 7 ì´ìƒ ì¢‹ìŒ)
    const diffs = new Set();
    for (let i = 0; i < sorted.length; i++) {
        for (let j = i + 1; j < sorted.length; j++) {
            diffs.add(sorted[j] - sorted[i]);
        }
    }
    const ac = diffs.size - 5;
    if (ac >= 9) score += 5;
    else if (ac >= 7) score += 2;
    else if (ac >= 5) score -= 3;
    else score -= 10;
    
    // 6. ìƒ‰ìƒ ë¶„í¬ (ìµœì†Œ 3ìƒ‰ ì´ìƒ)
    const colors = new Set(numbers.map(n => this.dataLoader.getBallColor(n)));
    if (colors.size >= 4) score += 3;
    else if (colors.size >= 3) score += 0;
    else score -= 5;
    
    // 7. ëìë¦¬ ë‹¤ì–‘ì„±
    const lastDigits = new Set(numbers.map(n => n % 10));
    if (lastDigits.size >= 5) score += 3;
    else if (lastDigits.size >= 4) score += 0;
    else if (lastDigits.size <= 2) score -= 8;
    
    return Math.max(50, Math.min(100, score));
}
```

---

### 3.7 `cron/lotto_weekly.php` - ì£¼ê°„ ë°ì´í„° ì—…ë°ì´íŠ¸

#### ì‹¤í–‰ í”Œë¡œìš°

```php
<?php
// 1. ê³µí†µ íŒŒì¼ ë¡œë“œ
require_once $_SERVER['DOCUMENT_ROOT'] . '/common.php';
require_once G5_LIB_PATH . '/lotto_draw.lib.php';

// 2. í˜„ì¬ DB ìµœëŒ€ íšŒì°¨ ì¡°íšŒ
$row = sql_fetch("SELECT MAX(draw_no) AS max_draw_no FROM g5_lotto_draw");
$max_draw_no = (int)($row['max_draw_no'] ?? 0);
$next_draw_no = $max_draw_no + 1;

// 3. ìµœëŒ€ 10íšŒê¹Œì§€ ì‹œë„ (cron ëˆ„ë½ ëŒ€ë¹„)
$max_gap = 10;
$inserted = 0;

for ($drw = $next_draw_no; $drw < $next_draw_no + $max_gap; $drw++) {
    echo "[INFO] íšŒì°¨ {$drw} ë°ì´í„° ê°€ì ¸ì˜¤ê¸° ì‹œë„...\n";
    
    // ë™í–‰ë³µê¶Œ API í˜¸ì¶œ ë° ì €ì¥
    $ok = li_fetch_and_save_lotto_draw($drw);
    
    if (!$ok) {
        // ì•„ì§ ë°œí‘œ ì•ˆ ëœ íšŒì°¨ì´ë©´ ì¤‘ë‹¨
        echo "[INFO] íšŒì°¨ {$drw} ëŠ” ì•„ì§ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.\n";
        break;
    }
    
    echo "[OK] íšŒì°¨ {$drw} ì €ì¥ ì™„ë£Œ.\n";
    $inserted++;
    
    // API ë¶€ë‹´ ì¤„ì´ê¸° ìœ„í•´ 0.2ì´ˆ ë”œë ˆì´
    usleep(200000);
}

// 4. ê²°ê³¼ ë¡œê·¸
echo "[INFO] ì´ {$inserted}ê°œ íšŒì°¨ê°€ ìƒˆë¡œ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.\n";
?>
```

#### í¬ë¡  ì„¤ì • ì˜ˆì‹œ

```bash
# ë§¤ì£¼ ì¼ìš”ì¼ ìƒˆë²½ 2ì‹œ ì‹¤í–‰
0 2 * * 0 /usr/bin/php /path/to/cron/lotto_weekly.php >> /var/log/lotto_weekly.log 2>&1
```

---

## 4. ë°ì´í„° í”Œë¡œìš°

### 4.1 ë¡œë˜ ë°ì´í„° ìˆ˜ì§‘ í”Œë¡œìš°

```
ë™í–‰ë³µê¶Œ API
    â†“
[cron/lotto_weekly.php]
    â”œâ”€ ìµœëŒ€ íšŒì°¨ ì¡°íšŒ
    â”œâ”€ ë‹¤ìŒ íšŒì°¨ë¶€í„° ìµœëŒ€ 10íšŒ ì‹œë„
    â””â”€ li_fetch_and_save_lotto_draw() í˜¸ì¶œ
        â†“
[lib/lotto_draw.lib.php]
    â”œâ”€ li_get_lotto_api_json() - JSON API í˜¸ì¶œ
    â”‚   â””â”€ ë²ˆí˜¸, 1ë“± ì •ë³´
    â”œâ”€ li_get_lotto_bywin_html() - HTML í˜ì´ì§€ í˜¸ì¶œ
    â”‚   â””â”€ 2/3ë“± ì •ë³´
    â””â”€ li_parse_prize_23_from_bywin() - HTML íŒŒì‹±
        â†“
[li_save_lotto_draw()]
    â””â”€ INSERT ... ON DUPLICATE KEY UPDATE
        â†“
[g5_lotto_draw í…Œì´ë¸”]
```

### 4.2 ì‚¬ìš©ì ë¶„ì„ í”Œë¡œìš°

```
ì‚¬ìš©ì (ë¸Œë¼ìš°ì €)
    â†“
[result.php] ë¶„ì„ ë²„íŠ¼ í´ë¦­
    â†“
[JavaScript] startAnalysis()
    â”œâ”€ í¬ë ˆë”§ ì‚¬ìš© ìš”ì²­ (POST /result.php?mode=use_credit)
    â”‚   â””â”€ [lib/lotto_credit.lib.php] lotto_use_one_analysis()
    â”‚       â”œâ”€ ë¬´ë£Œ í¬ë ˆë”§ í™•ì¸
    â”‚       â”œâ”€ ì—†ìœ¼ë©´ ìœ ë£Œ í¬ë ˆë”§ ì‚¬ìš©
    â”‚       â””â”€ ë¡œê·¸ ê¸°ë¡
    â”‚
    â”œâ”€ ë²ˆí˜¸ ìƒì„± ì—”ì§„ ì¤€ë¹„
    â”‚   â””â”€ [scripts/lotto-generator.js] lottoGenerator.init()
    â”‚
    â””â”€ ë²ˆí˜¸ ìƒì„± ë° í‘œì‹œ
        â”œâ”€ [lottoGenerator.generate(style)]
        â”‚   â”œâ”€ í†µê³„ ë¶„ì„
        â”‚   â”œâ”€ ë²ˆí˜¸ ìƒì„± (10ê°€ì§€ ì „ëµ)
        â”‚   â””â”€ ì ìˆ˜ ê³„ì‚°
        â”‚
        â””â”€ ê²°ê³¼ ë Œë”ë§
            â”œâ”€ ë²ˆí˜¸ í‘œì‹œ
            â”œâ”€ ì ìˆ˜ í‘œì‹œ
            â”œâ”€ ìŠ¤í† ë¦¬ ìƒì„±
            â””â”€ ë¦¬í¬íŠ¸ ìƒì„±
    â†“
[ì €ì¥ ë²„íŠ¼ í´ë¦­]
    â†“
[api/save_analysis.php]
    â””â”€ INSERT INTO g5_lotto_analysis
```

### 4.3 ê²°ì œ í”Œë¡œìš°

```
ì‚¬ìš©ì (ë¸Œë¼ìš°ì €)
    â†“
[result.php] ì¶©ì „ ë²„íŠ¼ í´ë¦­
    â†“
[JavaScript] showChargeModal()
    â”œâ”€ íŒ¨í‚¤ì§€ ì„ íƒ
    â””â”€ processPayment()
        â†“
[api/toss/create_order.php]
    â”œâ”€ ì£¼ë¬¸ ìƒì„±
    â”‚   â””â”€ INSERT INTO g5_lotto_toss_orders
    â””â”€ í† ìŠ¤ ê²°ì œì°½ ì •ë³´ ë°˜í™˜
        â†“
[í† ìŠ¤í˜ì´ë¨¼ì¸  ê²°ì œì°½]
    â”œâ”€ ê²°ì œ ì§„í–‰
    â””â”€ ê²°ì œ ì™„ë£Œ/ì‹¤íŒ¨
        â†“
[payments/toss/success.php] ë˜ëŠ” [fail.php]
    â”œâ”€ ê²°ì œ ê²€ì¦
    â”œâ”€ í¬ë ˆë”§ ì¶©ì „
    â”‚   â””â”€ [lib/lotto_credit.lib.php] lotto_charge_credit()
    â””â”€ ë¦¬ë‹¤ì´ë ‰íŠ¸
        â†“
[result.php] (ê²°ì œ ì™„ë£Œ í›„)
    â””â”€ refreshCreditBalance() - í¬ë ˆë”§ ê°±ì‹ 
```

---

## 5. ì£¼ìš” í•¨ìˆ˜ ë° í´ë˜ìŠ¤

### 5.1 PHP í•¨ìˆ˜ ëª©ë¡

#### í¬ë ˆë”§ ê´€ë ¨ (`lib/lotto_credit.lib.php`)

| í•¨ìˆ˜ëª… | ì„¤ëª… | íŒŒë¼ë¯¸í„° | ë°˜í™˜ê°’ |
|--------|------|----------|--------|
| `lotto_get_credit_row()` | í¬ë ˆë”§ ì¡°íšŒ | `$mb_id`, `$create_if_not_exists` | ë°°ì—´ |
| `lotto_use_one_analysis()` | í¬ë ˆë”§ ì‚¬ìš© | `$mb_id`, `$memo`, `$ref_key` | ë°°ì—´ |
| `lotto_charge_credit()` | í¬ë ˆë”§ ì¶©ì „ | `$mb_id`, `$amount`, `$memo`, `$ref_key`, `$change_type` | ë°°ì—´ |
| `lotto_grant_welcome_credit()` | ì‹ ê·œ íšŒì› ë¬´ë£Œ í¬ë ˆë”§ ì§€ê¸‰ | `$mb_id`, `$memo` | ë°°ì—´ |

#### íšŒì°¨ ë°ì´í„° ê´€ë ¨ (`lib/lotto_draw.lib.php`)

| í•¨ìˆ˜ëª… | ì„¤ëª… | íŒŒë¼ë¯¸í„° | ë°˜í™˜ê°’ |
|--------|------|----------|--------|
| `li_get_lotto_api_json()` | ë™í–‰ë³µê¶Œ JSON API í˜¸ì¶œ | `$drwNo`, `&$error` | ë°°ì—´ ë˜ëŠ” null |
| `li_get_lotto_bywin_html()` | ë™í–‰ë³µê¶Œ HTML í˜ì´ì§€ í˜¸ì¶œ | `$drwNo`, `&$error` | ë¬¸ìì—´ ë˜ëŠ” null |
| `li_parse_prize_23_from_bywin()` | HTML íŒŒì‹± (2/3ë“± ì •ë³´) | `$html`, `&$error` | ë°°ì—´ ë˜ëŠ” null |
| `li_save_lotto_draw()` | DB ì €ì¥ | `$data`, `&$error` | bool |
| `li_fetch_and_save_lotto_draw()` | í†µí•© í•¨ìˆ˜ (API í˜¸ì¶œ + ì €ì¥) | `$drwNo`, `&$error` | bool |

### 5.2 JavaScript í´ë˜ìŠ¤/ê°ì²´

#### `LottoDataLoader` - ë°ì´í„° ë¡œë”

```javascript
const LottoDataLoader = {
    _cache: null,
    
    // ì†ì„± ì ‘ê·¼ì
    get data() {
        if (this._cache) return this._cache;
        // LOTTO_HISTORY_DATA ì²˜ë¦¬
        this._cache = this._processData();
        return this._cache;
    },
    
    // ë°ì´í„° ì²˜ë¦¬
    _processData() {
        // ìµœê·¼ 100íšŒì°¨ íˆìŠ¤í† ë¦¬ ìƒì„±
        // ì „ì²´ í†µê³„ ê³„ì‚°
        // Hot/Cold ë²ˆí˜¸ ì¶”ì¶œ
    },
    
    // í†µê³„ ê³„ì‚°
    _calculateAllTimeStats(rounds) {
        // ë¹ˆë„ ë¶„ì„
        // í™€ì§/ê³ ì € ë¹„ìœ¨
        // ì—°ì†ë²ˆí˜¸ íŒ¨í„´
        // Hot/Cold ë²ˆí˜¸
    },
    
    // ë²ˆí˜¸ ìƒ‰ìƒ ë°˜í™˜
    getBallColor(num) {
        // ë™í–‰ë³µê¶Œ ê³µì‹ ìƒ‰ìƒ ê¸°ì¤€
        // 1~10: ë…¸ë‘, 11~20: íŒŒë‘, ...
    }
};
```

#### `lottoGenerator` - ë²ˆí˜¸ ìƒì„± ì—”ì§„

```javascript
const lottoGenerator = {
    ready: false,
    dataLoader: LottoDataLoader,
    
    // ì´ˆê¸°í™”
    async init() {
        this.ready = true;
        return this;
    },
    
    // í†µê³„ ë¶„ì„
    analyzeStats() {
        // ìµœê·¼ 100íšŒ ë¹ˆë„ ë¶„ì„
        // Hot/Cold ë²ˆí˜¸
        // ë™ë°˜ ì¶œí˜„ ë¶„ì„
        // ì—°ì†ë²ˆí˜¸ íŒ¨í„´
        // ìƒ‰ìƒ ë¶„í¬
    },
    
    // ì ìˆ˜ ê³„ì‚°
    calculateScore(numbers) {
        // 7ê°€ì§€ í•­ëª© í‰ê°€
        // 50~100ì  ë²”ìœ„
    },
    
    // ë²ˆí˜¸ ìƒì„±
    generate(style = 'balanced') {
        // 10ê°€ì§€ ìŠ¤íƒ€ì¼ ì§€ì›
        // ì ìˆ˜ 70ì  ì´ìƒ ì±„íƒ
    },
    
    // ë¦¬í¬íŠ¸ ìƒì„±
    generateReport(result) {
        // ìš”ì•½ ì •ë³´
        // ì¸ì‚¬ì´íŠ¸
        // ìƒ‰ìƒ ë¶„í¬
    }
};
```

#### `GnuboardAPI` - API ë˜í¼

```javascript
const GnuboardAPI = {
    baseUrl: typeof G5_URL !== 'undefined' ? G5_URL : '',
    
    // í¬ë ˆë”§ ì¡°íšŒ
    async getCredits() {
        const response = await fetch(`${this.baseUrl}/api/get_credits.php`);
        const data = await response.json();
        // localStorage ë™ê¸°í™”
        return data;
    },
    
    // í¬ë ˆë”§ ì‚¬ìš©
    async useCredit(round_no = 0) {
        const response = await fetch(`${this.baseUrl}/api/use_credit.php`, {
            method: 'POST',
            body: round_no > 0 ? `round_no=${round_no}` : ''
        });
        const data = await response.json();
        // localStorage ì—…ë°ì´íŠ¸
        return data;
    },
    
    // ë¶„ì„ ê²°ê³¼ ì €ì¥
    async saveAnalysis(numbers, round, score, strategy) {
        // ...
    },
    
    // íˆìŠ¤í† ë¦¬ ì¡°íšŒ
    async getHistory(page = 1, limit = 20) {
        // ...
    }
};
```

---

## 6. API ì—”ë“œí¬ì¸íŠ¸ ìƒì„¸

### 6.1 í¬ë ˆë”§ ê´€ë ¨ API

#### `GET /api/get_credits.php`

**ìš”ì²­:**
```
GET /api/get_credits.php
Cookie: PHPSESSID=...
```

**ì‘ë‹µ:**
```json
{
    "success": true,
    "user_id": "user123",
    "user_name": "í™ê¸¸ë™",
    "profile_image": "https://...",
    "free_uses": 1,
    "credit_balance": 5,
    "total": 6,
    "analysis_count": 6,
    "is_premium": true
}
```

**ì²˜ë¦¬ ë¡œì§:**
```php
// 1. ë¡œê·¸ì¸ ì²´í¬
if (!$is_member) {
    return ['success' => false, 'error' => 'Not logged in'];
}

// 2. í¬ë ˆë”§ ì¡°íšŒ (ì—†ìœ¼ë©´ ìë™ ìƒì„±)
$credit = lotto_get_credit_row($member['mb_id'], true);

// 3. ì‘ë‹µ ë°˜í™˜
return [
    'success' => true,
    'free_uses' => $credit['free_uses'],
    'credit_balance' => $credit['credit_balance'],
    'total' => $credit['free_uses'] + $credit['credit_balance']
];
```

#### `POST /api/use_credit.php`

**ìš”ì²­:**
```
POST /api/use_credit.php
Content-Type: application/x-www-form-urlencoded

round_no=1202
```

**ì‘ë‹µ:**
```json
{
    "success": true,
    "message": "í¬ë ˆë”§ ì‚¬ìš© ì™„ë£Œ",
    "used_as": "free",
    "free_uses": 0,
    "credit_balance": 5,
    "total": 5
}
```

**ì²˜ë¦¬ ë¡œì§:**
```php
// 1. ë¡œê·¸ì¸ ì²´í¬
if (!$is_member) {
    return ['success' => false, 'error' => 'Not logged in'];
}

// 2. í¬ë ˆë”§ ì‚¬ìš©
$use = lotto_use_one_analysis(
    $member['mb_id'],
    'AI ë¶„ì„ ì‹¤í–‰ (íšŒì°¨ ' . $round_no . ')',
    'round_' . $round_no
);

// 3. ì‘ë‹µ ë°˜í™˜
return [
    'success' => $use['success'],
    'used_as' => $use['used_as'],
    'free_uses' => $use['free_uses'],
    'credit_balance' => $use['credit_balance']
];
```

### 6.2 ë¶„ì„ ê´€ë ¨ API

#### `POST /api/save_analysis.php`

**ìš”ì²­:**
```json
{
    "numbers": [1, 2, 3, 4, 5, 6],
    "round": 1202,
    "score": 85,
    "strategy": "balanced"
}
```

**ì‘ë‹µ:**
```json
{
    "success": true,
    "message": "Analysis saved",
    "id": 12345
}
```

**ì²˜ë¦¬ ë¡œì§:**
```php
// 1. ë¡œê·¸ì¸ ì²´í¬
// 2. JSON ì…ë ¥ íŒŒì‹±
// 3. ë²ˆí˜¸ ìœ íš¨ì„± ê²€ì‚¬ (1~45, 6ê°œ, ì¤‘ë³µ ì—†ìŒ)
// 4. í…Œì´ë¸” ìë™ ìƒì„± (ì—†ì„ ê²½ìš°)
// 5. ë°ì´í„° ì €ì¥
sql_query("INSERT INTO g5_lotto_analysis 
           (mb_id, lotto_round, numbers, score, strategy, created_at) 
           VALUES (...)");
```

### 6.3 ê²°ì œ ê´€ë ¨ API

#### `POST /api/toss/create_order.php`

**ìš”ì²­:**
```json
{
    "product": "CREDIT_20"
}
```

**ì‘ë‹µ:**
```json
{
    "ok": true,
    "clientKey": "test_ck_...",
    "orderId": "LC20251215123456...",
    "amount": 2500,
    "orderName": "í¬ë ˆë”§ 20íšŒ ì¶©ì „",
    "customerName": "í™ê¸¸ë™",
    "customerEmail": "user@example.com",
    "successUrl": "https://lottoinsight.ai/payments/toss/success.php",
    "failUrl": "https://lottoinsight.ai/payments/toss/fail.php"
}
```

**ì²˜ë¦¬ ë¡œì§:**
```php
// 1. ìƒí’ˆ ì •ë³´ ë§¤í•‘
$PRODUCTS = [
    'CREDIT_5' => ['amount' => 1000, 'credit' => 5],
    'CREDIT_20' => ['amount' => 2500, 'credit' => 20],
    'CREDIT_50' => ['amount' => 5000, 'credit' => 50]
];

// 2. ì£¼ë¬¸ë²ˆí˜¸ ìƒì„±
$orderId = 'LC' . date('YmdHis') . bin2hex(random_bytes(6));

// 3. ì£¼ë¬¸ ì •ë³´ DB ì €ì¥
sql_query("INSERT INTO g5_lotto_toss_orders 
           (order_id, mb_id, product_code, amount, credit_qty, status) 
           VALUES (...)");

// 4. í† ìŠ¤ ê²°ì œì°½ ì •ë³´ ë°˜í™˜
```

---

## 7. í”„ë¡ íŠ¸ì—”ë“œ êµ¬ì¡°

### 7.1 `result.php` í´ë¼ì´ì–¸íŠ¸ ì‚¬ì´ë“œ ë¡œì§

#### ìƒíƒœ ê´€ë¦¬

```javascript
let state = {
    isLoggedIn: false,
    freeCredit: 0,
    paidCredit: 0,
    userName: 'ê²ŒìŠ¤íŠ¸',
    profileImage: null,
    userId: null,
    selectedStyles: ['hotcold', 'ac'],
    currentResults: [],
    history: []
};
```

#### ì£¼ìš” í•¨ìˆ˜

##### `startAnalysis()` - ë¶„ì„ ì‹œì‘

```javascript
async function startAnalysis() {
    // 1. í¬ë ˆë”§ ì‚¬ìš© ìš”ì²­
    const resp = await fetch(location.pathname, {
        method: 'POST',
        headers: { 'Content-Type': 'application/x-www-form-urlencoded' },
        body: new URLSearchParams({ mode: 'use_credit' })
    });
    
    const data = await resp.json();
    
    if (!data.success) {
        // ì—ëŸ¬ ì²˜ë¦¬
        updateCreditDisplay();
        return;
    }
    
    // 2. í¬ë ˆë”§ ìƒíƒœ ì—…ë°ì´íŠ¸
    state.freeCredit = data.free_uses;
    state.paidCredit = data.credit_balance;
    updateCreditDisplay();
    
    // 3. ë²ˆí˜¸ ìƒì„± ì—”ì§„ ì¤€ë¹„
    await ensureGeneratorReady();
    
    // 4. ë¡œë”© í™”ë©´ í‘œì‹œ
    showLoading();
    
    // 5. ë²ˆí˜¸ ìƒì„± ë° í‘œì‹œ
    setTimeout(async () => {
        await generateAndDisplay();
        hideLoading();
    }, 2000); // ì‹œê°ì  íš¨ê³¼ë¥¼ ìœ„í•œ ë”œë ˆì´
}
```

##### `generateAndDisplay()` - ë²ˆí˜¸ ìƒì„± ë° í‘œì‹œ

```javascript
async function generateAndDisplay() {
    const generator = await ensureGeneratorReady();
    const selectedStyles = state.selectedStyles;
    const results = [];
    
    // ì„ íƒëœ ìŠ¤íƒ€ì¼ë¡œ ë²ˆí˜¸ ìƒì„±
    for (const style of selectedStyles) {
        const result = generator.generate(style);
        results.push(result);
    }
    
    // ê²°ê³¼ ì €ì¥
    state.currentResults = results;
    
    // ê²°ê³¼ ë Œë”ë§
    renderResults(results);
    
    // ì €ì¥ ê¸°ëŠ¥ í™œì„±í™”
    enableSaveFunction();
}
```

##### `renderResults()` - ê²°ê³¼ ë Œë”ë§

```javascript
function renderResults(results) {
    const container = document.getElementById('resultsContainer');
    
    results.forEach((result, index) => {
        const card = document.createElement('div');
        card.className = 'result-card';
        card.dataset.index = index;
        
        // ë²ˆí˜¸ í‘œì‹œ
        const numbersHtml = result.numbers.map(n => {
            const color = getBallColor(n);
            return `<span class="ball ball-${color}">${n}</span>`;
        }).join('');
        
        // ì ìˆ˜ í‘œì‹œ
        const scoreHtml = `<div class="score">${result.score}ì </div>`;
        
        // ìŠ¤í† ë¦¬ í‘œì‹œ
        const storiesHtml = result.stories.map(s => {
            return `<div class="story">
                <span class="story-label">${s.label}</span>
                <span class="story-desc">${s.description}</span>
            </div>`;
        }).join('');
        
        card.innerHTML = `
            <div class="result-numbers">${numbersHtml}</div>
            ${scoreHtml}
            <div class="result-stories">${storiesHtml}</div>
        `;
        
        container.appendChild(card);
    });
}
```

##### `saveCurrentResult()` - ê²°ê³¼ ì €ì¥

```javascript
async function saveCurrentResult(index) {
    const result = state.currentResults[index];
    if (!result) return;
    
    try {
        const response = await fetch('/api/save_analysis.php', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({
                numbers: result.numbers,
                round: getAnalysisRound(),
                score: result.score,
                strategy: result.style
            })
        });
        
        const data = await response.json();
        
        if (data.success) {
            showToast('âœ… ë¶„ì„ ê²°ê³¼ê°€ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤!', 'success');
            updateHistoryDisplay();
        } else {
            showToast('ì €ì¥ ì‹¤íŒ¨: ' + (data.error || 'ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜'), 'error');
        }
    } catch (e) {
        console.error('ì €ì¥ ì˜¤ë¥˜:', e);
        showToast('ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜ë¡œ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.', 'error');
    }
}
```

### 7.2 UI ì»´í¬ë„ŒíŠ¸

#### ë¡œë”© ëª¨ë‹¬

```javascript
function showLoading() {
    const modal = document.getElementById('loadingModal');
    modal.classList.add('active');
    
    const loadingBar = document.getElementById('loadingBar');
    const loadingText = document.getElementById('loadingText');
    
    const messages = [
        "ğŸ“Š ë™í–‰ë³µê¶Œ ë°ì´í„° ë¡œë”© ì¤‘...",
        "ğŸ” ìµœê·¼ 100íšŒ ë‹¹ì²¨ íŒ¨í„´ ë¶„ì„...",
        "ğŸ“ˆ ê³¼ì¶œ/ë¯¸ì¶œ ë²ˆí˜¸ ê³„ì‚° ì¤‘...",
        "âš–ï¸ í™€ì§/ê³ ì € ê· í˜• ìµœì í™”...",
        "âœ¨ ìµœì¢… ì¡°í•© ì„ ë³„ ì¤‘..."
    ];
    
    let progress = 0;
    let msgIndex = 0;
    
    const interval = setInterval(() => {
        progress += Math.random() * 12 + 4;
        if (progress > 100) progress = 100;
        
        loadingBar.style.width = progress + '%';
        
        if (progress > msgIndex * 20 && msgIndex < messages.length) {
            loadingText.textContent = messages[msgIndex];
            msgIndex++;
        }
        
        if (progress >= 100) {
            clearInterval(interval);
        }
    }, 100);
}
```

#### í† ìŠ¤íŠ¸ ì•Œë¦¼

```javascript
function showToast(message, type = 'info', duration = 2500) {
    const toast = document.createElement('div');
    toast.className = `toast toast-${type}`;
    toast.textContent = message;
    toast.style.cssText = `
        position: fixed;
        bottom: 24px;
        left: 50%;
        transform: translateX(-50%);
        padding: 16px 24px;
        background: var(--primary);
        border: 1px solid rgba(0,224,164,0.3);
        border-radius: 12px;
        z-index: 10000;
        animation: toastIn 0.3s ease;
    `;
    
    document.body.appendChild(toast);
    
    setTimeout(() => {
        toast.style.animation = 'toastOut 0.3s ease forwards';
        setTimeout(() => toast.remove(), 300);
    }, duration);
}
```

#### ì¶©ì „ ëª¨ë‹¬

```javascript
function showChargeModal() {
    const modal = document.createElement('div');
    modal.id = 'chargeModal';
    modal.innerHTML = `
        <div class="charge-modal-backdrop" onclick="closeChargeModal()"></div>
        <div class="charge-modal-content">
            <div class="charge-modal-header">
                <h3>ğŸ”‹ í¬ë ˆë”§ ì¶©ì „</h3>
                <button onclick="closeChargeModal()">Ã—</button>
            </div>
            <div class="charge-modal-body">
                <div class="charge-current">
                    <div>í˜„ì¬ ë³´ìœ  í¬ë ˆë”§</div>
                    <div>${state.freeCredit + state.paidCredit}íšŒ</div>
                </div>
                
                <div class="charge-options">
                    <div class="charge-option" data-product="CREDIT_5" onclick="selectChargeOption(this)">
                        <div>5íšŒ</div>
                        <div>â‚©1,000</div>
                    </div>
                    <div class="charge-option popular" data-product="CREDIT_20" onclick="selectChargeOption(this)">
                        <div>20íšŒ</div>
                        <div>â‚©2,500</div>
                    </div>
                    <div class="charge-option" data-product="CREDIT_50" onclick="selectChargeOption(this)">
                        <div>50íšŒ</div>
                        <div>â‚©5,000</div>
                    </div>
                </div>
                
                <button onclick="processPayment()">ê²°ì œí•˜ê¸°</button>
            </div>
        </div>
    `;
    
    document.body.appendChild(modal);
}
```

---

## 8. ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ

### 8.1 ì£¼ìš” í…Œì´ë¸” ìƒì„¸

#### `g5_lotto_draw` - ë¡œë˜ íšŒì°¨ ë°ì´í„°

```sql
CREATE TABLE g5_lotto_draw (
    draw_no INT PRIMARY KEY,                    -- íšŒì°¨ ë²ˆí˜¸ (1~1201)
    draw_date DATE NOT NULL,                    -- ì¶”ì²¨ì¼ (YYYY-MM-DD)
    
    -- ë‹¹ì²¨ë²ˆí˜¸
    n1 INT NOT NULL,                            -- 1ë²ˆì§¸ ë²ˆí˜¸
    n2 INT NOT NULL,                            -- 2ë²ˆì§¸ ë²ˆí˜¸
    n3 INT NOT NULL,                            -- 3ë²ˆì§¸ ë²ˆí˜¸
    n4 INT NOT NULL,                            -- 4ë²ˆì§¸ ë²ˆí˜¸
    n5 INT NOT NULL,                            -- 5ë²ˆì§¸ ë²ˆí˜¸
    n6 INT NOT NULL,                            -- 6ë²ˆì§¸ ë²ˆí˜¸
    bonus INT NOT NULL,                         -- ë³´ë„ˆìŠ¤ ë²ˆí˜¸
    
    -- 1ë“± ì •ë³´
    first_prize_total BIGINT NULL,              -- 1ë“± ì´ ë‹¹ì²¨ê¸ˆ
    first_prize_each BIGINT NULL,               -- 1ë“± 1ì¸ë‹¹ ë‹¹ì²¨ê¸ˆ
    first_winners INT NULL,                     -- 1ë“± ë‹¹ì²¨ì ìˆ˜
    
    -- 2ë“± ì •ë³´
    second_winners INT NULL,                    -- 2ë“± ë‹¹ì²¨ì ìˆ˜
    second_prize_each BIGINT NULL,              -- 2ë“± 1ì¸ë‹¹ ë‹¹ì²¨ê¸ˆ
    
    -- 3ë“± ì •ë³´
    third_winners INT NULL,                     -- 3ë“± ë‹¹ì²¨ì ìˆ˜
    third_prize_each BIGINT NULL,               -- 3ë“± 1ì¸ë‹¹ ë‹¹ì²¨ê¸ˆ
    
    -- íŒë§¤ ì •ë³´
    total_sales BIGINT NULL,                    -- ì´ íŒë§¤ì•¡
    
    -- íƒ€ì„ìŠ¤íƒ¬í”„
    created_at DATETIME NOT NULL,
    updated_at DATETIME NOT NULL,
    
    INDEX idx_draw_date (draw_date),
    INDEX idx_created_at (created_at)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;
```

**ë°ì´í„° ì˜ˆì‹œ:**
```sql
INSERT INTO g5_lotto_draw VALUES (
    1201, '2025-12-06',
    7, 9, 24, 27, 35, 36, 37,
    1000000000, 1000000000, 5,
    84, 53326506,
    2589, 1500000,
    10000000000,
    '2025-12-07 10:00:00', '2025-12-07 10:00:00'
);
```

#### `g5_lotto_credit` - íšŒì› í¬ë ˆë”§

```sql
CREATE TABLE g5_lotto_credit (
    mb_id VARCHAR(100) PRIMARY KEY,             -- íšŒì› ID
    free_uses INT DEFAULT 0,                   -- ë¬´ë£Œ ì‚¬ìš© íšŸìˆ˜
    credit_balance INT DEFAULT 0,              -- ìœ ë£Œ í¬ë ˆë”§ ì”ì•¡
    created_at DATETIME NOT NULL,
    updated_at DATETIME NOT NULL,
    
    INDEX idx_updated_at (updated_at)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;
```

**ë°ì´í„° ì˜ˆì‹œ:**
```sql
INSERT INTO g5_lotto_credit VALUES (
    'user123',
    1,      -- ë¬´ë£Œ 1íšŒ (ì‹ ê·œ íšŒì› ê°€ì… ì‹œ ì§€ê¸‰)
    5,      -- ìœ ë£Œ 5íšŒ (ê²°ì œë¡œ ì¶©ì „)
    '2025-12-10 10:00:00',
    '2025-12-15 14:30:00'
);
```

#### `g5_lotto_credit_log` - í¬ë ˆë”§ ì‚¬ìš© ë¡œê·¸

```sql
CREATE TABLE g5_lotto_credit_log (
    id INT AUTO_INCREMENT PRIMARY KEY,
    mb_id VARCHAR(100) NOT NULL,                -- íšŒì› ID
    change_type VARCHAR(20) NOT NULL,          -- 'free', 'use', 'charge', 'welcome', 'admin_adjust'
    amount INT NOT NULL,                       -- ë³€ê²½ëŸ‰ (-1, +10 ë“±)
    before_balance INT NOT NULL,               -- ë³€ê²½ ì „ ì”ì•¡
    after_balance INT NOT NULL,                -- ë³€ê²½ í›„ ì”ì•¡
    memo VARCHAR(255) DEFAULT '',              -- ë©”ëª¨
    ref_key VARCHAR(100) DEFAULT '',            -- ì°¸ì¡°í‚¤ (íšŒì°¨ ë“±)
    ip VARCHAR(50) DEFAULT '',                 -- IP ì£¼ì†Œ
    created_at DATETIME NOT NULL,
    
    INDEX idx_mb_id (mb_id),
    INDEX idx_change_type (change_type),
    INDEX idx_created_at (created_at)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;
```

**ë¡œê·¸ íƒ€ì…:**
- `free`: ë¬´ë£Œ í¬ë ˆë”§ ì‚¬ìš©
- `use`: ìœ ë£Œ í¬ë ˆë”§ ì‚¬ìš©
- `charge`: í¬ë ˆë”§ ì¶©ì „
- `welcome`: ì‹ ê·œ íšŒì› ë¬´ë£Œ í¬ë ˆë”§ ì§€ê¸‰
- `admin_adjust`: ê´€ë¦¬ì ì¡°ì •

#### `g5_lotto_analysis` - ì‚¬ìš©ì ë¶„ì„ ê²°ê³¼

```sql
CREATE TABLE g5_lotto_analysis (
    id INT AUTO_INCREMENT PRIMARY KEY,
    mb_id VARCHAR(100) NOT NULL,                -- íšŒì› ID
    lotto_round INT DEFAULT 0,                 -- ë¶„ì„ ëŒ€ìƒ íšŒì°¨
    numbers VARCHAR(50) NOT NULL,              -- ì¶”ì²œ ë²ˆí˜¸ (ì½¤ë§ˆ êµ¬ë¶„: "1,2,3,4,5,6")
    score INT DEFAULT 0,                       -- ë¶„ì„ ì ìˆ˜ (50~100)
    strategy VARCHAR(100) DEFAULT '',          -- ì‚¬ìš©ëœ ì „ëµ
    is_winner TINYINT(1) DEFAULT 0,           -- ë‹¹ì²¨ ì—¬ë¶€
    match_count INT DEFAULT 0,                 -- ì¼ì¹˜ ê°œìˆ˜
    created_at DATETIME NOT NULL,
    
    INDEX idx_mb_id (mb_id),
    INDEX idx_lotto_round (lotto_round),
    INDEX idx_created_at (created_at)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;
```

#### `g5_lotto_toss_orders` - í† ìŠ¤ ê²°ì œ ì£¼ë¬¸

```sql
CREATE TABLE g5_lotto_toss_orders (
    id INT AUTO_INCREMENT PRIMARY KEY,
    order_id VARCHAR(100) UNIQUE NOT NULL,      -- ì£¼ë¬¸ë²ˆí˜¸ (LC + ë‚ ì§œì‹œê°„ + ëœë¤)
    mb_id VARCHAR(100) NOT NULL,               -- íšŒì› ID
    product_code VARCHAR(50) NOT NULL,         -- ìƒí’ˆ ì½”ë“œ (CREDIT_5, CREDIT_20, CREDIT_50)
    amount INT NOT NULL,                       -- ê²°ì œ ê¸ˆì•¡
    credit_qty INT NOT NULL,                  -- ì¶©ì „ í¬ë ˆë”§ ìˆ˜
    status VARCHAR(20) DEFAULT 'READY',        -- 'READY', 'SUCCESS', 'FAIL', 'DONE'
    payment_key VARCHAR(200) DEFAULT '',       -- í† ìŠ¤ ê²°ì œ í‚¤
    fail_code VARCHAR(50) DEFAULT '',          -- ì‹¤íŒ¨ ì½”ë“œ
    fail_message VARCHAR(255) DEFAULT '',     -- ì‹¤íŒ¨ ë©”ì‹œì§€
    raw_json TEXT,                             -- í† ìŠ¤ API ì‘ë‹µ ì›ë¬¸
    created_at DATETIME NOT NULL,
    updated_at DATETIME NOT NULL,
    approved_at DATETIME NULL,                 -- ê²°ì œ ìŠ¹ì¸ ì‹œê°„
    
    INDEX idx_mb_id (mb_id),
    INDEX idx_status (status),
    INDEX idx_created_at (created_at)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;
```

---

## 9. ë³´ì•ˆ ë° ìµœì í™”

### 9.1 ë³´ì•ˆ ì¡°ì¹˜

#### SQL Injection ë°©ì§€

```php
// âœ… ì˜¬ë°”ë¥¸ ë°©ë²•
$mb_id_esc = sql_real_escape_string($mb_id);
$sql = "SELECT * FROM g5_member WHERE mb_id = '{$mb_id_esc}'";

// âŒ ì˜ëª»ëœ ë°©ë²• (ì‚¬ìš© ê¸ˆì§€)
$sql = "SELECT * FROM g5_member WHERE mb_id = '{$mb_id}'";
```

#### XSS ë°©ì§€

```php
// âœ… ì˜¬ë°”ë¥¸ ë°©ë²•
echo htmlspecialchars($user_input, ENT_QUOTES, 'UTF-8');

// HTML ì¶œë ¥ ì‹œ
<div><?= htmlspecialchars($data['memo'], ENT_QUOTES, 'UTF-8') ?></div>
```

#### CSRF ë°©ì§€

```php
// ì„¸ì…˜ ê¸°ë°˜ í† í° ì‚¬ìš© (ì¼ë¶€ í˜ì´ì§€)
$token = md5(uniqid(rand(), true));
$_SESSION['csrf_token'] = $token;

// í¼ ì œì¶œ ì‹œ ê²€ì¦
if ($_POST['csrf_token'] !== $_SESSION['csrf_token']) {
    die('CSRF í† í° ë¶ˆì¼ì¹˜');
}
```

#### ì„¸ì…˜ ê´€ë¦¬

```php
// GNUBOARD ì„¸ì…˜ ì‹œìŠ¤í…œ í™œìš©
set_session('ss_mb_id', $member['mb_id']);
set_session('ss_mb_key', md5($member['mb_datetime'] . $member['mb_ip']));

// ì„¸ì…˜ ê²€ì¦
if (get_session('ss_mb_id') !== $member['mb_id']) {
    // ì„¸ì…˜ ë¶ˆì¼ì¹˜ ì²˜ë¦¬
}
```

### 9.2 ì„±ëŠ¥ ìµœì í™”

#### ë°ì´í„°ë² ì´ìŠ¤ ìµœì í™”

```sql
-- ì¸ë±ìŠ¤ ì¶”ê°€
CREATE INDEX idx_mb_id ON g5_lotto_credit(mb_id);
CREATE INDEX idx_draw_no ON g5_lotto_draw(draw_no);
CREATE INDEX idx_created_at ON g5_lotto_credit_log(created_at);

-- ì¿¼ë¦¬ ìµœì í™”
-- âŒ ë¹„íš¨ìœ¨ì 
SELECT * FROM g5_lotto_draw ORDER BY draw_no DESC LIMIT 1;

-- âœ… íš¨ìœ¨ì  (ì¸ë±ìŠ¤ í™œìš©)
SELECT * FROM g5_lotto_draw WHERE draw_no = (SELECT MAX(draw_no) FROM g5_lotto_draw);
```

#### ìºì‹± ì „ëµ

```javascript
// JavaScript ë°ì´í„° ìºì‹±
const LottoDataLoader = {
    _cache: null,
    
    get data() {
        if (this._cache) return this._cache;
        this._cache = this._processData();
        return this._cache;
    },
    
    clearCache() {
        this._cache = null;
    }
};
```

#### API í˜¸ì¶œ ìµœì í™”

```javascript
// ì¤‘ë³µ ìš”ì²­ ë°©ì§€
let creditRequestInProgress = false;

async function getCredits() {
    if (creditRequestInProgress) {
        return; // ì´ë¯¸ ìš”ì²­ ì¤‘ì´ë©´ ëŒ€ê¸°
    }
    
    creditRequestInProgress = true;
    try {
        const data = await fetch('/api/get_credits.php');
        return await data.json();
    } finally {
        creditRequestInProgress = false;
    }
}
```

---

## 10. ì—ëŸ¬ ì²˜ë¦¬ ë° ë¡œê¹…

### 10.1 ì—ëŸ¬ ì²˜ë¦¬ íŒ¨í„´

#### PHP ì—ëŸ¬ ì²˜ë¦¬

```php
// í•¨ìˆ˜ ë ˆë²¨ ì—ëŸ¬ ì²˜ë¦¬
function li_get_lotto_api_json($drwNo, &$error = '')
{
    $error = '';
    
    try {
        $ch = curl_init();
        // ...
        $raw = curl_exec($ch);
        
        if (curl_errno($ch)) {
            $error = 'cURL ì˜¤ë¥˜: ' . curl_error($ch);
            return null;
        }
        
        // ...
    } catch (Exception $e) {
        $error = 'ì˜ˆì™¸ ë°œìƒ: ' . $e->getMessage();
        return null;
    }
}
```

#### JavaScript ì—ëŸ¬ ì²˜ë¦¬

```javascript
// try-catchë¡œ ì—ëŸ¬ ì²˜ë¦¬
async function startAnalysis() {
    try {
        const resp = await fetch(...);
        const data = await resp.json();
        
        if (!data.success) {
            // ì—ëŸ¬ ë©”ì‹œì§€ í‘œì‹œ
            showToast(data.message || 'ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.', 'error');
            return;
        }
        
        // ì„±ê³µ ì²˜ë¦¬
    } catch (e) {
        console.error('ë¶„ì„ ì˜¤ë¥˜:', e);
        showToast('ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.', 'error');
    }
}
```

### 10.2 ë¡œê¹…

#### í¬ë ˆë”§ ì‚¬ìš© ë¡œê·¸

```php
// ëª¨ë“  í¬ë ˆë”§ ë³€ê²½ ì‚¬í•­ ë¡œê·¸ ê¸°ë¡
sql_query("INSERT INTO g5_lotto_credit_log
           SET mb_id = '{$mb_id}',
               change_type = '{$change_type}',
               amount = {$amount},
               before_balance = {$before},
               after_balance = {$after},
               memo = '{$memo}',
               ref_key = '{$ref_key}',
               ip = '{$ip}',
               created_at = NOW()");
```

#### ë¶„ì„ ì‹¤í–‰ ë¡œê·¸

```php
// ë¶„ì„ ì‹¤í–‰ ì‹œ ë¡œê·¸ ê¸°ë¡
sql_query("INSERT INTO g5_lotto_analysis_log
           SET mb_id = '{$mb_id}',
               round_no = {$round_no},
               user_ip = '{$ip}',
               created_at = NOW()");
```

---

## 11. ë°°í¬ ë° ìš´ì˜

### 11.1 í™˜ê²½ ìš”êµ¬ì‚¬í•­

- **PHP**: 7.4 ì´ìƒ
- **MySQL**: 5.7 ì´ìƒ / MariaDB 10.3 ì´ìƒ
- **ì›¹ì„œë²„**: Apache 2.4+ / Nginx 1.18+
- **í•„ìˆ˜ í™•ì¥ ëª¨ë“ˆ**:
  - cURL (API í˜¸ì¶œìš©)
  - DOM (HTML íŒŒì‹±ìš©)
  - JSON (ë°ì´í„° ì²˜ë¦¬ìš©)
  - PDO/MySQLi (ë°ì´í„°ë² ì´ìŠ¤)

### 11.2 í¬ë¡  ì„¤ì •

```bash
# ë§¤ì£¼ ì¼ìš”ì¼ ìƒˆë²½ 2ì‹œ ì‹¤í–‰
0 2 * * 0 /usr/bin/php /path/to/cron/lotto_weekly.php >> /var/log/lotto_weekly.log 2>&1

# ë§¤ì¼ ìƒˆë²½ 3ì‹œ íŒë§¤ì  ë°ì´í„° ë™ê¸°í™”
0 3 * * * /usr/bin/php /path/to/cron/lotto_store_sync.php >> /var/log/lotto_store.log 2>&1
```

### 11.3 ëª¨ë‹ˆí„°ë§ í¬ì¸íŠ¸

1. **í¬ë¡  ì‹¤í–‰ ë¡œê·¸**
   - ì£¼ê°„ íšŒì°¨ ì—…ë°ì´íŠ¸ ì„±ê³µ ì—¬ë¶€
   - API í˜¸ì¶œ ì‹¤íŒ¨ìœ¨

2. **ì—ëŸ¬ ë¡œê·¸**
   - PHP ì—ëŸ¬ ë¡œê·¸ (`error_log`)
   - JavaScript ì½˜ì†” ì—ëŸ¬

3. **ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§**
   - ë°ì´í„°ë² ì´ìŠ¤ ì¿¼ë¦¬ ì‹œê°„
   - API ì‘ë‹µ ì‹œê°„
   - í˜ì´ì§€ ë¡œë”© ì‹œê°„

---

## 12. ì½”ë“œ í’ˆì§ˆ ë° ìœ ì§€ë³´ìˆ˜

### 12.1 ì½”ë”© ì»¨ë²¤ì…˜

#### PHP ì½”ë”© ìŠ¤íƒ€ì¼

```php
// í•¨ìˆ˜ëª…: snake_case
function lotto_get_credit_row($mb_id, $create_if_not_exists = false)
{
    // ë³€ìˆ˜ëª…: snake_case
    $mb_id_esc = sql_real_escape_string($mb_id);
    
    // ìƒìˆ˜: UPPER_CASE
    define('G5_LOTTO_CREDIT_TABLE', 'g5_lotto_credit');
    
    // ë°°ì—´ í‚¤: snake_case
    return [
        'success' => true,
        'free_uses' => 0,
        'credit_balance' => 0
    ];
}
```

#### JavaScript ì½”ë”© ìŠ¤íƒ€ì¼

```javascript
// ë³€ìˆ˜ëª…: camelCase
const lottoGenerator = {
    // í•¨ìˆ˜ëª…: camelCase
    async generateNumbers(style) {
        // ìƒìˆ˜: UPPER_CASE
        const MAX_ATTEMPTS = 1000;
        
        // ...
    }
};
```

### 12.2 ì£¼ì„ ê·œì¹™

```php
/**
 * í•¨ìˆ˜ ì„¤ëª…
 * 
 * @param string $mb_id íšŒì› ì•„ì´ë””
 * @param bool $create_if_not_exists ì—†ìœ¼ë©´ ìƒì„± ì—¬ë¶€
 * @return array
 *  - success bool
 *  - free_uses int
 *  - credit_balance int
 */
function lotto_get_credit_row($mb_id, $create_if_not_exists = false)
{
    // ì¸ë¼ì¸ ì£¼ì„: ê°„ë‹¨í•œ ì„¤ëª…
    $mb_id_esc = sql_real_escape_string($mb_id); // SQL Injection ë°©ì§€
}
```

---

## 13. í™•ì¥ ê°€ëŠ¥ì„±

### 13.1 ìƒˆë¡œìš´ ë¶„ì„ ì•Œê³ ë¦¬ì¦˜ ì¶”ê°€

```javascript
// lotto-generator.jsì— ìƒˆë¡œìš´ ì „ëµ ì¶”ê°€
_generateNewStrategy(stats) {
    // ìƒˆë¡œìš´ ì•Œê³ ë¦¬ì¦˜ êµ¬í˜„
    const numbers = [];
    // ...
    return numbers.sort((a, b) => a - b);
}

// generate() í•¨ìˆ˜ì— ì¶”ê°€
case 'new_strategy':
    numbers = this._generateNewStrategy(stats);
    break;
```

### 13.2 ìƒˆë¡œìš´ ê²°ì œ ìˆ˜ë‹¨ ì¶”ê°€

```php
// api/payment/create_order.php
$payment_methods = [
    'toss' => 'TossPayments',
    'kakao' => 'KakaoPay',  // ìƒˆë¡œ ì¶”ê°€
    'naver' => 'NaverPay'   // ìƒˆë¡œ ì¶”ê°€
];

$method = $_POST['method'] ?? 'toss';
$handler = $payment_methods[$method];

require_once "api/{$handler}/create_order.php";
```

---

## 14. ë¬¸ì œ í•´ê²° ê°€ì´ë“œ

### 14.1 ì¼ë°˜ì ì¸ ë¬¸ì œ

#### ë¬¸ì œ: í¬ë ˆë”§ì´ ì°¨ê°ë˜ì§€ ì•ŠìŒ

**ì›ì¸**: íŠ¸ëœì­ì…˜ ì‹¤íŒ¨ ë˜ëŠ” ì¤‘ë³µ ìš”ì²­

**í•´ê²°**:
```php
// íŠ¸ëœì­ì…˜ í™•ì¸
sql_query("BEGIN");
$ok1 = sql_query("UPDATE ...");
$ok2 = sql_query("INSERT ...");
if ($ok1 && $ok2) {
    sql_query("COMMIT");
} else {
    sql_query("ROLLBACK");
    // ì—ëŸ¬ ë¡œê·¸ ê¸°ë¡
}
```

#### ë¬¸ì œ: ë²ˆí˜¸ ìƒì„±ì´ ëŠë¦¼

**ì›ì¸**: ì•Œê³ ë¦¬ì¦˜ ë³µì¡ë„ ë˜ëŠ” ë°ì´í„° í¬ê¸°

**í•´ê²°**:
```javascript
// ìºì‹± í™œìš©
if (this._cache) return this._cache;

// ìµœì í™”ëœ ì•Œê³ ë¦¬ì¦˜ ì‚¬ìš©
// ë¶ˆí•„ìš”í•œ ë°˜ë³µ ì œê±°
```

---

## 15. ì°¸ê³  ìë£Œ

### 15.1 ì™¸ë¶€ API ë¬¸ì„œ

- **ë™í–‰ë³µê¶Œ API**: https://www.dhlottery.co.kr/common.do?method=getLottoNumber
- **í† ìŠ¤í˜ì´ë¨¼ì¸  API**: https://docs.tosspayments.com/
- **ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸ API**: https://developers.kakao.com/docs/latest/ko/kakaologin/rest-api

### 15.2 GNUBOARD ë¬¸ì„œ

- **ê³µì‹ ì‚¬ì´íŠ¸**: https://sir.kr/
- **ë§¤ë‰´ì–¼**: https://sir.kr/g5_manual

---

**ì‘ì„±ì¼**: 2025-12-15  
**ë²„ì „**: 2.0  
**ì‘ì„±ì**: AI Assistant

---

## ë¶€ë¡: ì£¼ìš” íŒŒì¼ ë¼ì¸ ìˆ˜

| íŒŒì¼ | ë¼ì¸ ìˆ˜ | ì„¤ëª… |
|------|---------|------|
| `index.php` | 8,077 | ë©”ì¸ ëœë”© í˜ì´ì§€ |
| `result.php` | 4,394 | ë¶„ì„ ê²°ê³¼ í˜ì´ì§€ |
| `scripts/lotto-generator.js` | 980 | AI ë¶„ì„ ì—”ì§„ |
| `scripts/lotto-data.js` | 1,207 | ë¡œë˜ íˆìŠ¤í† ë¦¬ ë°ì´í„° |
| `lib/lotto_store.lib.php` | 779 | íŒë§¤ì  ì •ë³´ ê´€ë¦¬ |
| `lib/lotto_draw.lib.php` | 386 | íšŒì°¨ ë°ì´í„° ì²˜ë¦¬ |
| `lib/lotto_credit.lib.php` | 305 | í¬ë ˆë”§ ê´€ë¦¬ |
| `auth.php` | 1,132 | ë¡œê·¸ì¸ í˜ì´ì§€ |

**ì´ ì½”ë“œ ë¼ì¸ ìˆ˜**: ì•½ 17,000+ ì¤„
